{% load static %}
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>범죄국 출국자 비율기반 범죄 구조 분석</title>
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <script src="https://unpkg.com/scrollama"></script>

  <style>
    body{
      font-family: Pretendard, sans-serif;
      margin:0;
      background:#fafafa;
      color:#111;
    }

    header{
      padding:40px 60px 10px 60px;
      background:#fff;
      border-bottom:1px solid #eee;
    }
    header h1{ margin:0 0 10px 0; font-size:28px; }
    header p{ margin:0; color:#444; line-height:1.6; }

    /* scrolly layout */
    #scrolly{
      position:relative;
      display:flex;
      gap:24px;
      padding:30px 60px;
    }

    /* left: text steps */
    #sections{
      width:38%;
      min-width:320px;
    }
    .step{
      background:#fff;
      border-radius:14px;
      padding:22px;
      margin:0 0 420px 0;
      box-shadow:0 8px 24px rgba(0,0,0,0.06);
      border:1px solid #eee;
    }
    .step h2{ margin:0 0 10px 0; font-size:18px; }
    .step p{ margin:0; line-height:1.7; color:#333; }

    #graphicWrap{
      width:62%;
      position:sticky;
      top:18px;
      height:calc(100vh - 36px);
      background:#fff;
      border-radius:14px;
      box-shadow:0 8px 24px rgba(0,0,0,0.06);
      border:1px solid #eee;
      padding:16px;
      display:flex;
      flex-direction:column;
      gap:10px;
    }

    #controls{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:16px;
      padding:6px 10px;
      border:1px dashed #ddd;
      border-radius:10px;
      background:#fafafa;
    }

    #graphic{
      flex:1;
      min-height:520px;
    }

    .hint{
      font-size:12px;
      color:#666;
    }

    input[type="range"]{ width:240px; }
  </style>
</head>

<body>

<header>
  <h1>범죄국 출국자 비율기반 범죄 구조 분석</h1>
</header>

<section id="scrolly">
  <div id="sections">
    <div class="step" data-step="0">
      <h2>STEP 1. 연도별 절대량 비교</h2>
      <p>
        우선 ‘사이버사기/보이스피싱’의 연도별 절대량 추세를 본다.
        팬데믹 구간과 회복 구간에서 변화가 어떻게 달라지는지 확인할 수 있다.
      </p>
    </div>

    <div class="step" data-step="1">
      <h2>STEP 2. 범죄국 노출 비율(%)과 범죄율의 상관관계</h2>
      <p>
        단순 출국자 수가 아니라 위험국 노출 비율이 범죄와 어떤 관계를 갖는지
        회귀선과 산점도를 통해 살핀다.
      </p>
    </div>

    <div class="step" data-step="2">
      <h2>STEP 3. 원형 중첩 그래프</h2>
      <p>
        연도별 레이어를 반투명으로 겹쳐 어떤 축이 진해지는지, 
        진해지는 범위는 어디인지를 보이게 한다.
        동시에 사이버 범죄 피해 인구 수도 확인할 수 있다.
        오른쪽에는 년도별 범죄국 노출 비율을 크기 비율로 확인할 수 있다.
      </p>
    </div>
  </div>

  <div id="graphicWrap">
    <div id="controls">
      <div>
        <b>시각화 반경 스케일:</b>
        <span id="scaleLabel">1.00x</span>
      </div>
      <div>
        <input id="scaleSlider" type="range" min="0.5" max="2.0" value="1.0" step="0.05" />
      </div>
      <div>
        <b>최대 연도:</b>
        <input id="yearSlider" type="range" min="2018" max="2025" value="2025" step="1" />
        <span id="yearLabel">2025</span>
      </div>

      <div class="hint">원형 중첩 그래프용 슬라이더</div>
    </div>
    <div id="graphic"></div>
  </div>
</section>

<script src="{% static 'main/line.js' %}"></script>

</body>
</html>
